# Modu-Messenger Android

## 통신 관련

안드로이드는 백엔드 서버와 통신은 rest api를 사용   
주로 3개의 라이브러리가 많이 사용  

`HttpURLConnection, HttpsURLConnection`  
* 자바 기본 제공 라이브러리
* 기본 라이브러리이다 보니 코드 사용량이 매우 많아짐
* 커넥션 관리 까지 가능하고 다양한 옵션 사용 가능
* 만약 쓴다면 한번 래핑 해서 사용하는게 좋아보임

`OkHttp`  
* "Square"라는 회사가 만든 라이브러리
* 사용법이 간단해보임 (Builder 사용)
* 동기, 비동기 방식 전부 사용가능

`Retrofit`  
* 위의 OkHttp를 좀더 사용하기 편하게 다듬은 라이브러리
* 가장 최근에 만들어진 라이브러리
* 많은 사람들이 사용하고 있는것으로 보임

Retrofit을 이용하여 백엔드와 통신하는 것으로 결정

## 프로필 관련 기능

프로필 사진, 상태 메시지 지원   
예정) 프로필 사진 업데이트 기능 지원   

## 메신저 기능 관련

웹 소켓을 이용한 메시징 기능 구현   

일반 메세지 (텍스트) 전송 가능   
예정) 기타 메세지 (사진, 파일 등) 지원 예정  

## 오프라인 모드

오프라인 모드를 지원  
내장 데이터 베이스에 채팅 내역, 친구 리스트등을 저장  
백그라운드에서 네트워크 연결 상태를 주기적으로 체크   
오프라인 모드 지원함에 따라 요청받은 데이터는 모두 로컬 데이터 베이스에 저장   
ui에 데이터 표시할때는 로컬 데이터 베이스의 데이터를 기반으로 표시    
최신 데이터 동기화 주기에 대한 고려 필요 (서버의 부하 감소)   
채팅 전송등의 기능 사용 불가   
채팅 목록 보기, 친구 프로필 보기 등의 기능은 사용 가능   

## SQLite, RoomDatabase

sqlite 의 경우 쿼리를 직접 작성 (오류발생시 런타임에 확인 가능)  
Room Databased의경우 SQLite 를 사용하기 쉽게 래핑한 라이브러리   
엔티티를 선언하고 JPQL 정도의 쿼리만을 작성함 (오류 발생시 컴파일 타임에 확인 가능)
버전 기록을 통해 migraiton이 용이함

## (예정) 알림 관련

파이어 베이스를 연동하여 푸쉬 알림 기능 구현 예정  
메세지를 백엔드에 전송 및 정상 수신시 채팅 방 내 다른 친구에게 푸시 알림 전송  

## 인증 관련

JWT 토큰을 이용한 인증 방식 사용  
백엔드에서 발급한 토큰을 앱 내부에서 저장하여 사용  